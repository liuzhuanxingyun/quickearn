# 开发日记

## Git代码管理与代码上传
将新代码添加到暂存区（例如，添加所有更改的文件）：

```bash
git add .
```

或指定文件：

```bash
git add <文件名>
```

## 提交更改
创建提交并添加消息：

```bash
git commit -m "fix： fix some bugs"
```

## 上传到github

```bash
git push origin main  
```

## 记得更新requirements

### Conventional Commits 中的常见前缀
以下是约定俗成的提交前缀（基于Conventional Commits规范），用于分类提交类型：

- **feat**: 新功能（feature）。
- **fix**: 修复bug。
- **docs**: 文档更改。
- **style**: 代码风格更改（不影响逻辑，如格式化）。
- **refactor**: 重构代码（不添加功能或修复bug）。
- **test**: 添加或修改测试。
- **chore**: 杂项任务（如工具更新、依赖管理）。
- **perf**: 性能改进。
- **ci**: 持续集成更改。
- **build**: 构建系统或外部依赖更改。
- **revert**: 撤销之前的提交。

这些前缀帮助自动化版本管理和变更日志生成。完整规范请参考 [Conventional Commits](https://www.conventionalcommits.org)。如果需要示例或应用到您的项目，请提供更多细节。

## 推送至远程仓库
如果有远程仓库（如GitHub），可将 main 替换为您的分支名，推送更改：

```bash
git push origin main
```



## 10.11
✅1. 学到组的概念  
✅2. 策略还是没有解决，可能涉及平仓问题，打算学到止盈止损再研究。  
问题就是平仓问题，但是最后一单还是没有生效，可能是把两个多单合并了？  
终于，在学习了止盈止损后，发现可以通过设置止盈止损来解决平仓问题，目前该问题解决  
✅3. 安装sambo的时候出现错误  
一键安装失败  
通过版本检查：`python -c "import sambo; print(sambo.__version__)"`  
发现是sambo下的依赖缺失，不断检查补充完缺失者即可修复
目前排查中，回测结果有待观察  
✅4. 下一步首先还是检查回测，特别是止盈止损的准确性，以此判定平仓价格是否与预期一致  
✅5. 完善批量回测的输出,特别是对于trades数量的过滤  
目前简单检查了一下，应该没问题  

## 10.12 
今日使用进度41.8，使用高级模型会消耗token  
✅6. 回测最大化指标异常，无法正确最大化  
初步怀疑是数据问题  
尝试使用打印解决，单次数值为0，批量数值严重畸形超过一百万  
怀疑是数据格式等问题  
目前最后决定舍弃了这套方案

## 10.13
✅7. 加入了atr绝对值过滤
修改了FractionalBacktest → Backtest
现在只允许整数btc交易
FractionalBacktest可允许分数btc交易
但代价是atr绝对值会经过归一化处理
✅8. 改变策略，
从原来的“只要有新信号，都会先平掉现有仓位”改为“只有在空仓时才能根据信号开仓”
✅9. 引入了可调的风险回报比rr
✅10. 完成提醒功能，邮件，小工具 
⚠️11. 计算总数字
在回测函数之外首先确定了数值
然后再在函数内进行引入
不确定是否会出现bug
✅12. 增加了数据下载功能
要注意24年更早的eth数据可能没有列名，需要再写个代码加上列名
此处并没有设计这个工具函数
因为暂时我还用不上
✅13. 整理了一下开关，放在了前面

## 10.15
✅14. 将ATR波动率过滤器阈值变成非固定值，而是基于当前的价格的百分比

## 10.16
✅15. 输出的文件名要为最佳胜率及其交易数量
✅16. 现在改为每一次的回测后，csv和html的文件都放在一个新的文件夹里面，这个文件夹放在result里面

10.18
✅17. 增加了3d热力图

10.20
✅18. 增加了实盘文件

20.21
✅19. 添加最大值止损金额限制，杠杆
✅20. 杠杆好像没有生效
已解决

20.24
21. 

























